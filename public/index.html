<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá th·ªëng G·ª£i √Ω Phim</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <h1>üé¨ MovieRec</h1>
            </div>
            <div class="nav-menu" id="navMenu">
                <button class="btn btn-red" onclick="showHome()">Trang ch·ªß</button>
                <button class="btn btn-red" onclick="showMovies()">Danh s√°ch phim</button>
                <button class="btn btn-red" onclick="showRecommendations()">G·ª£i √Ω</button>
                <button class="btn btn-red" onclick="showHistory()">L·ªãch s·ª≠</button>
                <button class="btn btn-red" onclick="showDashboard()">Dashboard</button>
                <div id="authButtons">
                    <button class="btn btn-primary" onclick="showLogin()">ƒêƒÉng nh·∫≠p</button>
                    <button class="btn btn-secondary" onclick="showRegister()">ƒêƒÉng k√Ω</button>
                </div>
                <div id="userMenu" style="display: none;">
                    <span id="username"></span>
                    <button class="btn btn-danger" onclick="logout()">ƒêƒÉng xu·∫•t</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <!-- Home Page -->
        <div id="homePage" class="page">
            <div class="hero">
                <h2>Ch√†o m·ª´ng ƒë·∫øn v·ªõi h·ªá th·ªëng g·ª£i √Ω phim</h2>
                <p>Kh√°m ph√° nh·ªØng b·ªô phim ph√π h·ª£p v·ªõi s·ªü th√≠ch c·ªßa b·∫°n</p>
                <button class="btn btn-large btn-red" onclick="showMovies()">Xem danh s√°ch phim</button>
            </div>
            
            <div class="trending-section">
                <h2 class="section-title">üî• Phim ƒëang th·ªãnh h√†nh</h2>
                <div id="trendingMoviesGrid" class="movies-grid"></div>
            </div>
        </div>

        <!-- Login Page -->
        <div id="loginPage" class="page" style="display: none;">
            <div class="auth-container">
                <h2>ƒêƒÉng nh·∫≠p</h2>
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label>M·∫≠t kh·∫©u</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">ƒêƒÉng nh·∫≠p</button>
                    <p class="text-center">
                        Ch∆∞a c√≥ t√†i kho·∫£n? <a href="#" onclick="showRegister()">ƒêƒÉng k√Ω ngay</a>
                    </p>
                </form>
            </div>
        </div>

        <!-- Register Page -->
        <div id="registerPage" class="page" style="display: none;">
            <div class="auth-container">
                <h2>ƒêƒÉng k√Ω</h2>
                <form id="registerForm" onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label>T√™n ng∆∞·ªùi d√πng</label>
                        <input type="text" id="registerUsername" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label>M·∫≠t kh·∫©u</label>
                        <input type="password" id="registerPassword" required minlength="6">
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">ƒêƒÉng k√Ω</button>
                    <p class="text-center">
                        ƒê√£ c√≥ t√†i kho·∫£n? <a href="#" onclick="showLogin()">ƒêƒÉng nh·∫≠p</a>
                    </p>
                </form>
            </div>
        </div>

        <!-- Movies Page -->
        <div id="moviesPage" class="page" style="display: none;">
            <h2>Danh s√°ch phim</h2>
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm phim..." onkeyup="searchMovies(event)">
                <select id="genreFilter" onchange="filterMovies()">
                    <option value="">T·∫•t c·∫£ th·ªÉ lo·∫°i</option>
                </select>
                <select id="yearFilter" onchange="filterMovies()">
                    <option value="">T·∫•t c·∫£ nƒÉm</option>
                </select>
            </div>
            <div id="moviesGrid" class="movies-grid"></div>
            <div id="pagination" class="pagination"></div>
        </div>

        <!-- Recommendations Page -->
        <div id="recommendationsPage" class="page" style="display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0;">G·ª£i √Ω d√†nh cho b·∫°n</h2>
                <div id="recommendationsLimitContainer" style="display: flex; align-items: center; gap: 10px;">
                    <label style="font-size: 0.9rem; color: var(--text-color);">Hi·ªÉn th·ªã:</label>
                    <select id="recommendationsLimit" onchange="changeRecommendationsLimit()" style="padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 0.9rem;">
                        <option value="20">20 phim</option>
                        <option value="30">30 phim</option>
                        <option value="50" selected>50 phim</option>
                        <option value="100">100 phim</option>
                    </select>
                </div>
            </div>
            <div id="recommendationsGrid" class="movies-grid"></div>
            <div id="recommendationsPagination" class="pagination"></div>
        </div>

        <!-- History Page -->
        <div id="historyPage" class="page" style="display: none;">
            <h2>L·ªãch s·ª≠ xem c·ªßa b·∫°n</h2>
            <div id="historyGrid" class="movies-grid"></div>
            <div id="historyPagination" class="pagination"></div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboardPage" class="page" style="display: none;">
            <h2> Dashboard Ph√¢n t√≠ch D·ªØ li·ªáu</h2>
            
            <!-- Summary Cards -->
            <div class="stats-cards">
                <div class="stat-card">
                    <h3>T·ªïng s·ªë phim</h3>
                    <p id="totalMovies" class="stat-value">-</p>
                </div>
                <div class="stat-card">
                    <h3>Rating trung b√¨nh</h3>
                    <p id="avgRating" class="stat-value">-</p>
                </div>
                <div class="stat-card">
                    <h3>T·ªïng l∆∞·ª£t click</h3>
                    <p id="totalClicks" class="stat-value">-</p>
                </div>
                <div class="stat-card">
                    <h3>S·ªë th·ªÉ lo·∫°i</h3>
                    <p id="uniqueGenres" class="stat-value">-</p>
                </div>
            </div>

            <!-- Charts -->
            <div class="charts-container">
                <!-- Rating Distribution -->
                <div class="chart-card">
                    <h3>Ph√¢n b·ªë Rating </h3>
                    <canvas id="ratingChart"></canvas>
                </div>

                <!-- Genre Frequency -->
                <div class="chart-card">
                    <h3>T·∫ßn su·∫•t Th·ªÉ lo·∫°i phim</h3>
                    <canvas id="genreChart"></canvas>
                </div>

                <!-- Top Items -->
                <div class="chart-card">
                    <h3> Top 10 Phim theo Rating</h3>
                    <canvas id="topRatingChart"></canvas>
                </div>

                <div class="chart-card">
                    <h3>Top 10 Phim theo L∆∞·ª£t Click</h3>
                    <canvas id="topClicksChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Movie Detail Modal -->
        <div id="movieModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" onclick="closeMovieModal()">&times;</span>
                <div id="movieDetail"></div>
            </div>
        </div>

        <!-- Watch Page -->
        <div id="watchPage" class="page" style="display: none;">
            <div class="watch-container">
                <div class="watch-main">
                    <div class="watch-poster-section">
                        <img id="watchPoster" src="" alt="" class="watch-poster">
                        <div class="watch-info">
                            <h1 id="watchTitle"></h1>
                            <div class="watch-meta">
                                <span id="watchYear"></span>
                                <span id="watchRating"></span>
                                <span id="watchDuration"></span>
                            </div>
                            <div id="watchGenres" class="watch-genres"></div>
                            <div class="watch-details">
                                <p><strong>ƒê·∫°o di·ªÖn:</strong> <span id="watchDirector"></span></p>
                                <p><strong>Qu·ªëc gia:</strong> <span id="watchCountry"></span></p>
                                <p><strong>M√¥ t·∫£:</strong></p>
                                <p id="watchDescription"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="watch-sidebar">
                    <h3>Phim ƒë·ªÅ xu·∫•t</h3>
                    <div id="watchSuggestions" class="watch-suggestions"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Spinner -->
    <div id="loading" class="loading" style="display: none;">
        <div class="spinner"></div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script src="js/main.js"></script>
</body>
</html>

