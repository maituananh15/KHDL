<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá th·ªëng G·ª£i √Ω Phim</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <h1>üé¨ MovieRec</h1>
            </div>
            <div class="nav-menu" id="navMenu">
                <button class="btn btn-red" onclick="showHome()">Trang ch·ªß</button>
                <button class="btn btn-red" onclick="showMovies()">Danh s√°ch phim</button>
                <button class="btn btn-red" onclick="showRecommendations()">G·ª£i √Ω</button>
                <button class="btn btn-red" onclick="showHistory()">L·ªãch s·ª≠</button>
                <button class="btn btn-red" onclick="showDashboard()">Dashboard</button>
                <button class="btn btn-red" onclick="showEvaluation()">ƒê√°nh gi√° m√¥ h√¨nh</button>
                <div id="authButtons">
                    <button class="btn btn-primary" onclick="showLogin()">ƒêƒÉng nh·∫≠p</button>
                </div>
                <div id="userMenu" style="display: none;">
                    <span id="username"></span>
                    <button class="btn btn-danger" onclick="logout()">ƒêƒÉng xu·∫•t</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <!-- Home Page -->
        <div id="homePage" class="page">
            <div class="hero">
                <h2>Ch√†o m·ª´ng ƒë·∫øn v·ªõi h·ªá th·ªëng g·ª£i √Ω phim</h2>
                <p>Kh√°m ph√° nh·ªØng b·ªô phim ph√π h·ª£p v·ªõi s·ªü th√≠ch c·ªßa b·∫°n</p>
                <button class="btn btn-large btn-red" onclick="showMovies()">Xem danh s√°ch phim</button>
            </div>
            
            <div class="trending-section">
                <h2 class="section-title">üî• Phim ƒëang th·ªãnh h√†nh</h2>
                <div id="trendingMoviesGrid" class="movies-grid"></div>
            </div>
        </div>

        <!-- Login Page -->
        <div id="loginPage" class="page" style="display: none;">
            <div class="auth-container">
                <h2>ƒêƒÉng nh·∫≠p</h2>
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label>M·∫≠t kh·∫©u</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">ƒêƒÉng nh·∫≠p</button>
                    <p class="text-center">
                        Ch∆∞a c√≥ t√†i kho·∫£n? <a href="#" onclick="showRegister()">ƒêƒÉng k√Ω ngay</a>
                    </p>
                </form>
            </div>
        </div>

        <!-- Register Page -->
        <div id="registerPage" class="page" style="display: none;">
            <div class="auth-container">
                <h2>ƒêƒÉng k√Ω</h2>
                <form id="registerForm" onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label>T√™n ng∆∞·ªùi d√πng</label>
                        <input type="text" id="registerUsername" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label>M·∫≠t kh·∫©u</label>
                        <input type="password" id="registerPassword" required minlength="6">
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">ƒêƒÉng k√Ω</button>
                    <p class="text-center">
                        ƒê√£ c√≥ t√†i kho·∫£n? <a href="#" onclick="showLogin()">ƒêƒÉng nh·∫≠p</a>
                    </p>
                </form>
            </div>
        </div>

        <!-- Movies Page -->
        <div id="moviesPage" class="page" style="display: none;">
            <h2>Danh s√°ch phim</h2>
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm phim..." onkeyup="searchMovies(event)">
                <select id="genreFilter" onchange="filterMovies()">
                    <option value="">T·∫•t c·∫£ th·ªÉ lo·∫°i</option>
                </select>
                <select id="yearFilter" onchange="filterMovies()">
                    <option value="">T·∫•t c·∫£ nƒÉm</option>
                </select>
            </div>
            <div id="moviesGrid" class="movies-grid"></div>
            <div id="pagination" class="pagination"></div>
        </div>

        <!-- Recommendations Page -->
        <div id="recommendationsPage" class="page" style="display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0;">G·ª£i √Ω d√†nh cho b·∫°n</h2>
            </div>
            <div id="recommendationsGrid" class="movies-grid"></div>
            <div id="recommendationsPagination" class="pagination"></div>
        </div>

        <!-- History Page -->
        <div id="historyPage" class="page" style="display: none;">
            <h2>L·ªãch s·ª≠ xem c·ªßa b·∫°n</h2>
            <div id="historyGrid" class="movies-grid"></div>
            <div id="historyPagination" class="pagination"></div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboardPage" class="page" style="display: none;">
            <h2> Dashboard Ph√¢n t√≠ch D·ªØ li·ªáu</h2>
            
            <!-- Summary Cards -->
            <div class="stats-cards">
                <div class="stat-card">
                    <h3>T·ªïng s·ªë phim</h3>
                    <p id="totalMovies" class="stat-value">-</p>
                </div>
                <div class="stat-card">
                    <h3>Rating trung b√¨nh</h3>
                    <p id="avgRating" class="stat-value">-</p>
                </div>
                <div class="stat-card">
                    <h3>T·ªïng l∆∞·ª£t xem</h3>
                    <p id="totalViews" class="stat-value">-</p>
                </div>
                <div class="stat-card">
                    <h3>S·ªë th·ªÉ lo·∫°i</h3>
                    <p id="uniqueGenres" class="stat-value">-</p>
                </div>
            </div>

            <!-- Charts -->
            <div class="charts-container">
                <!-- Rating Distribution -->
                <div class="chart-card">
                    <h3>Ph√¢n b·ªë Rating </h3>
                    <canvas id="ratingChart"></canvas>
                </div>

                <!-- Genre Frequency -->
                <div class="chart-card">
                    <h3>T·∫ßn su·∫•t Th·ªÉ lo·∫°i phim</h3>
                    <canvas id="genreChart"></canvas>
                </div>

                <!-- Top Items -->
                <div class="chart-card">
                    <h3> Top 10 Phim theo Rating</h3>
                    <canvas id="topRatingChart"></canvas>
                </div>

            </div>
        </div>

        <!-- Evaluation Page -->
        <div id="evaluationPage" class="page" style="display: none;">
            <h2>ƒê√°nh gi√° m√¥ h√¨nh</h2>
            <p>Hi·ªÉn th·ªã c√°c ch·ªâ s·ªë RMSE, MAE, Precision@K, Recall@K.</p>
            <div class="stats-cards">
                <div class="stat-card">
                    <h3>RMSE</h3>
                    <p id="metricRmse" class="stat-value">-</p>
                </div>
                <div class="stat-card">
                    <h3>MAE</h3>
                    <p id="metricMae" class="stat-value">-</p>
                </div>
                <div class="stat-card">
                    <h3>Precision@K</h3>
                    <p id="metricPrecision" class="stat-value">-</p>
                </div>
                <div class="stat-card">
                    <h3>Recall@K</h3>
                    <p id="metricRecall" class="stat-value">-</p>
                </div>
            </div>
            <div id="evaluationNote" style="margin-top:16px;color:#6b7280;"></div>

            <div class="info-section" style="margin-top:24px;">
                <h3>Ti√™u ch√≠ ƒë√°nh gi√°</h3>
                <ul style="margin-left:18px; line-height:1.6;">
                    <li><strong>RMSE</strong>: CƒÉn b·∫≠c hai trung b√¨nh b√¨nh ph∆∞∆°ng sai kh√°c gi·ªØa rating d·ª± ƒëo√°n v√† rating th·∫≠t. Th·∫•p h∆°n t·ªët h∆°n.</li>
                    <li><strong>MAE</strong>: Trung b√¨nh tr·ªã tuy·ªát ƒë·ªëi sai kh√°c gi·ªØa rating d·ª± ƒëo√°n v√† rating th·∫≠t. Th·∫•p h∆°n t·ªët h∆°n.</li>
                    <li><strong>Precision@K</strong>: Trong K g·ª£i √Ω ƒë·∫ßu ti√™n, t·ªâ l·ªá phim ƒë√∫ng s·ªü th√≠ch. Cao h∆°n t·ªët h∆°n.</li>
                    <li><strong>Recall@K</strong>: Trong c√°c phim ƒë√∫ng s·ªü th√≠ch, bao nhi√™u phim xu·∫•t hi·ªán trong K g·ª£i √Ω ƒë·∫ßu ti√™n. Cao h∆°n t·ªët h∆°n.</li>
                    <li><strong>K</strong>: S·ªë l∆∞·ª£ng g·ª£i √Ω ƒë∆∞·ª£c x√©t (v√≠ d·ª• K=10).</li>
                </ul>
            </div>
        </div>

        <!-- Movie Detail Modal -->
        <div id="movieModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" onclick="closeMovieModal()">&times;</span>
                <div id="movieDetail"></div>
            </div>
        </div>

        <!-- Watch Page -->
        <div id="watchPage" class="page" style="display: none;">
            <div class="watch-container">
                <div class="watch-main">
                    <div class="watch-poster-section">
                        <img id="watchPoster" src="" alt="" class="watch-poster">
                        <div class="watch-info">
                            <h1 id="watchTitle"></h1>
                            <div class="watch-meta">
                                <span id="watchYear"></span>
                                <span id="watchRating"></span>
                                <span id="watchDuration"></span>
                            </div>
                            <div id="watchGenres" class="watch-genres"></div>
                            <div class="watch-details">
                                <p><strong>ƒê·∫°o di·ªÖn:</strong> <span id="watchDirector"></span></p>
                                <p><strong>Qu·ªëc gia:</strong> <span id="watchCountry"></span></p>
                                <p><strong>M√¥ t·∫£:</strong></p>
                                <p id="watchDescription"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="watch-sidebar">
                    <h3>Phim ƒë·ªÅ xu·∫•t</h3>
                    <div id="watchSuggestions" class="watch-suggestions"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Spinner -->
    <div id="loading" class="loading" style="display: none;">
        <div class="spinner"></div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script src="js/main.js"></script>
</body>
</html>

